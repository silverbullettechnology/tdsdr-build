# Config file for SBT SDRDC build scripts
# Copyright (C) 2014 Silver Bullet Technology


# GIT REPOSITORY PATHS
# By default these are public SBT repositories hosted on github.com.  You can change them
# to point to local repositories or forks, which will be cloned into the build tree when
# you give the command
#   make setup
# *_BRANCH may be omitted if you're using the "master" branch of the repository
# *_USER and *_EMAIL will be applied to the cloned repositories' user.name and user.email
# settings, and may be omitted if not needed

# Linux kernel source
SBT_KERNEL_GIT_REPO   := https://github.com/silverbullettechnology/linux-adi.git
SBT_KERNEL_GIT_BRANCH := tdsdr-staging
#SBT_KERNEL_GIT_USER   := 
#SBT_KERNEL_GIT_EMAIL  := 
export SBT_KERNEL_GIT_REPO SBT_KERNEL_GIT_BRANCH SBT_KERNEL_GIT_USER SBT_KERNEL_GIT_EMAIL


# PETALINUX SDK
# Point this to a copy of the PetaLinux SDK; it will be extracted into the correct path
# and patched for the SDRDC build.  Currently PetaLinux 2013.04 is supported.
export SBT_PETALINUX_SDK := $(HOME)/sdrdc/petalinux-v2013.04-final-full.tar.gz
export SBT_PETALINUX_VER := 2013.04


# BSP selection
# Select the default BSP "SDRDC" for normal SMP use.  Select the BSP "SDRDC-AMP" for AMP
# use with FreeRTOS, as described in Xilinx UG978 "Zynq AMP Linux FreeRTOS Guide"
#export SBT_BSP := SDRDC
#export SBT_BSP := SDRDC-AMP
export SBT_BSP := TDSDR
#export SBT_BSP := SDR-M1

# prebuilt boot.bins:
ifeq ($(SBT_BSP),TDSDR)
	SBT_BOOT_FILE := fsbl_8596688e8a5a_u-boot_5d918b1c_pl_bdb0df03.bin
endif
ifeq ($(SBT_BSP),SDR-M1)
	# - Use 02_25_2016_1334 with Schroff 23005-466 52 chassis
	# - Use 02_25_2016_1500 with Schroff 23005-484 52 chassis
	SBT_BOOT_FILE := fsbl_939dfde_uboot_5f237df_pl_02_25_2016_1334.bin
	#SBT_BOOT_FILE := fsbl_939dfde_uboot_5f237df_pl_02_25_2016_1500.bin
endif
ifeq ($(SBT_BSP),SDRDC)
	SBT_BOOT_FILE := boot.bin
endif
ifeq ($(SBT_BSP),SDRDC-AMP)
	SBT_BOOT_FILE := boot.bin
endif

# prebuilt binaries are in a board-specific tree, if not set then we'll skip the copy
ifneq ($(SBT_BOOT_FILE),)
	export SBT_BOOT_BIN := $(SBT_TOP)/sbt/prebuilt/$(SBT_BSP)/$(SBT_BOOT_FILE)
endif

# You shouldn't need to modify anything beyond here
SBT_TOOLS     := $(SBT_TOP)/sbt/tools
SBT_FILES     := $(SBT_TOP)/sbt/files
SBT_PATCHES   := $(SBT_TOP)/sbt/patches
SBT_KERNEL    := $(SBT_TOP)/kernel
SBT_PETALINUX := $(SBT_TOP)/petalinux
export SBT_TOOLS SBT_FILES SBT_PATCHES SBT_KERNEL SBT_PETALINUX

SBT_NOW := $(shell date +%Y%m%d-%H%M%S)
SBT_LOG := $(SBT_TOP)/log/$(SBT_NOW)
export SBT_NOW SBT_LOG

